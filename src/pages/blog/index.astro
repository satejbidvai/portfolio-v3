---
import MainLayout from '../../layouts/main-layout.astro';
import { getAllPosts, getPostUrl } from '../../utils/blog';

const posts = await getAllPosts();
---

<MainLayout title="Blog | Satej Bidvai" description="Blog posts by Satej Bidvai" url="/blog" ogImage="/og-image.png">
  <div class="mt-8">
    <h1 class="text-3xl md:text-4xl font-bold mb-2">Blog</h1>
    <p class="text-muted-foreground mb-8">Thoughts, TILs, and learnings.</p>

    <div class="space-y-3">
      {
        posts.map((post) => (
          <article>
            <a
              href={getPostUrl(post.slug)}
              class="flex items-center gap-6 px-4 py-3 rounded-lg border border-border/30 hover:border-border/60 hover:bg-background/50 transition-all group"
            >
              <h2 class="text-lg font-semibold group-hover:text-foreground/80 transition-colors flex-1">
                {post.data.title}
              </h2>
              <time
                datetime={post.data.publishDate.toISOString()}
                class="shrink-0 text-xs text-muted-foreground bg-border/20 px-2.5 py-1 rounded whitespace-nowrap"
              >
                {post.data.publishDate.toLocaleDateString(undefined, {
                  year: 'numeric',
                  month: 'short',
                  day: 'numeric'
                })}
              </time>
            </a>
          </article>
        ))
      }
    </div>
  </div>
</MainLayout>
